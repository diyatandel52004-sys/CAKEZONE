{% extends "base.html" %}
{% load static %}

{% block body %}
<div class="container py-5">
    <div class="row g-4">

        {% for p in products %}
        <div class="col-lg-4 col-md-6">
            <div class="bg-light border-inner text-center p-4">

                <img src="{{ p.image.url }}" class="img-fluid mb-3" 
                     style="height:180px; object-fit:cover;">

                <h4 class="text-uppercase">{{ p.name }}</h4>

                <p class="mb-2">Price: ₹{{ p.price }}</p>

                <!-- ⭐ REPLACED Add to Cart Button WITH FORM ⭐ -->
                <form method="post" action="{% url 'add_to_cart' p.id %}">
                    {% csrf_token %}
                    <input type="number" name="quantity" value="1" min="1" 
                           class="form-control mb-2" style="width:80px; margin:auto;">
                    <button type="submit" class="btn btn-primary border-inner px-4 py-2">
                        Add to Cart
                    </button>
                </form>

            </div>
        </div>
        {% empty %}
        <p>No products available.</p>
        {% endfor %}

    </div>
</div>
{% endblock %}
